{"version":3,"sources":["../index.js"],"names":["SELECTION_START_AT","TableDragSelect","propTypes","value","error","Error","Array","isArray","props","length","columnCount","row","cell","onChange","func","children","trs","Children","toArray","rowCount","tr","tds","type","td","state","selectionStarted","startRow","startColumn","endRow","endColumn","addMode","touchStartCoordinates","componentDidMount","window","addEventListener","handleTouchEndWindow","componentWillUnmount","removeEventListener","render","renderRows","map","i","j","handleTouchStartCell","handleTouchMoveCell","isCellBeingSelected","isLeftClick","e","button","isTouch","clientX","clientY","touchX","touchY","startSelection","Math","abs","eventToCellLocation","column","setState","preventDefault","minRow","min","maxRow","max","minColumn","maxColumn","Component","defaultProps","Cell","shouldComponentUpdate","beingSelected","nextProps","selected","handleTouchStart","passive","handleTouchMove","className","disabled","onTouchStart","onTouchMove","target","touches","touch","document","elementFromPoint","tagName","parentNode","rowIndex","cellIndex"],"mappings":"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","file":"index.js","sourcesContent":["import React from \"react\";\nimport equal from \"deep-is\";\nimport clone from \"clone\";\nimport PropTypes from \"prop-types\";\n\n/**\n * Minimum amount of px for selection to start\n * \n * @type {number}\n */\nconst SELECTION_START_AT=20;\n\nexport default class TableDragSelect extends React.Component {\n  propTypes = {\n    value: props => {\n      const error = new Error(\n        \"Invalid prop `value` supplied to `TableDragSelect`. Validation failed.\"\n      );\n      if (!Array.isArray(props.value)) {\n        return error;\n      }\n      if (props.value.length === 0) {\n        return;\n      }\n      const columnCount = props.value[0].length;\n      for (const row of props.value) {\n        if (!Array.isArray(row) || row.length !== columnCount) {\n          return error;\n        }\n        for (const cell of row) {\n          if (typeof cell !== \"boolean\") {\n            return error;\n          }\n        }\n      }\n    },\n    onChange: PropTypes.func,\n    children: props => {\n      if (TableDragSelect.propTypes.value(props)) {\n        return; // Let error be handled elsewhere\n      }\n      const error = new Error(\n        \"Invalid prop `children` supplied to `TableDragSelect`. Validation failed.\"\n      );\n      const trs = React.Children.toArray(props.children);\n      const rowCount = props.value.length;\n      const columnCount = props.value.length === 0 ? 0 : props.value[0].length;\n      if (trs.length !== rowCount) {\n        return error;\n      }\n      for (const tr of trs) {\n        const tds = React.Children.toArray(tr.props.children);\n        if (tr.type !== \"tr\" || tds.length !== columnCount) {\n          return error;\n        }\n        for (const td of tds) {\n          if (td.type !== \"td\") {\n            return error;\n          }\n        }\n      }\n    }\n  };\n\n  static defaultProps = {\n    value: [],\n    onChange: () => {}\n  };\n\n  state = {\n    selectionStarted: false,\n    startRow: null,\n    startColumn: null,\n    endRow: null,\n    endColumn: null,\n    addMode: null\n  };\n\n  touchStartCoordinates=null;\n\n  componentDidMount = () => {\n    window.addEventListener(\"mouseup\", this.handleTouchEndWindow);\n    window.addEventListener(\"touchend\", this.handleTouchEndWindow);\n  };\n\n  componentWillUnmount = () => {\n    window.removeEventListener(\"mouseup\", this.handleTouchEndWindow);\n    window.removeEventListener(\"touchend\", this.handleTouchEndWindow);\n  };\n\n  render = () => {\n    const { value, onChange, ...props } = this.props;\n    return (\n      <table className=\"table-drag-select\" {...props}>\n        <tbody>\n          {this.renderRows()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderRows = () =>\n    React.Children.map(this.props.children, (tr, i) => {\n      return (\n        <tr key={i} {...tr.props}>\n          {React.Children.map(tr.props.children, (cell, j) =>\n            <Cell\n              key={j}\n              onTouchStart={this.handleTouchStartCell}\n              onTouchMove={this.handleTouchMoveCell}\n              selected={this.props.value[i][j]}\n              beingSelected={this.isCellBeingSelected(i, j)}\n              {...cell.props}\n            >\n              {cell.props.children}\n            </Cell>\n          )}\n        </tr>\n      );\n    });\n\n  handleTouchStartCell = e => {\n    const isLeftClick = e.button === 0;\n    const isTouch = e.type !== \"mousedown\";\n\n    this.touchStartCoordinates=[e.clientX, e.clientY];\n  };\n\n  handleTouchMoveCell = e => {\n    if(this.touchStartCoordinates===null){\n      return ;\n    }\n\n    const {selectionStarted}=this.state;\n    const [touchX, touchY]=this.touchStartCoordinates;\n\n    const startSelection=Math.abs(e.clientX-touchX)>=SELECTION_START_AT\n      || Math.abs(e.clientY-touchY)>=SELECTION_START_AT;\n\n    const { row, column } = eventToCellLocation(e);\n\n    if(!selectionStarted && startSelection){\n      this.setState({\n        selectionStarted: true,\n        startRow: row,\n        startColumn: column,\n        endRow: row,\n        endColumn: column,\n        addMode: !this.props.value[row][column]\n      });\n    }\n\n    if(selectionStarted){\n      e.preventDefault();\n\n      if(!startSelection){\n        this.setState({selectionStarted: false});\n      }\n\n      this.setState({\n        endRow: row,\n        endColumn: column\n      });\n    }\n  };\n\n  handleTouchEndWindow = e => {\n    const isLeftClick = e.button === 0;\n    const isTouch = e.type !== \"mousedown\";\n\n    if (this.state.selectionStarted && (isLeftClick || isTouch)) {\n      const value = clone(this.props.value);\n      const minRow = Math.min(this.state.startRow, this.state.endRow);\n      const maxRow = Math.max(this.state.startRow, this.state.endRow);\n      for (let row = minRow; row <= maxRow; row++) {\n        const minColumn = Math.min(\n          this.state.startColumn,\n          this.state.endColumn\n        );\n        const maxColumn = Math.max(\n          this.state.startColumn,\n          this.state.endColumn\n        );\n        for (let column = minColumn; column <= maxColumn; column++) {\n          value[row][column] = this.state.addMode;\n        }\n      }\n      this.setState({ selectionStarted: false });\n      this.props.onChange(value);\n    }\n\n    this.touchStartCoordinates=null;\n  };\n\n  isCellBeingSelected = (row, column) => {\n    const minRow = Math.min(this.state.startRow, this.state.endRow);\n    const maxRow = Math.max(this.state.startRow, this.state.endRow);\n    const minColumn = Math.min(this.state.startColumn, this.state.endColumn);\n    const maxColumn = Math.max(this.state.startColumn, this.state.endColumn);\n    return (\n      this.state.selectionStarted &&\n      (row >= minRow &&\n        row <= maxRow &&\n        column >= minColumn &&\n        column <= maxColumn)\n    );\n  };\n}\n\nclass Cell extends React.Component {\n  // This optimization gave a 10% performance boost while drag-selecting\n  // cells\n  shouldComponentUpdate = nextProps =>\n    this.props.beingSelected !== nextProps.beingSelected ||\n    this.props.selected !== nextProps.selected;\n\n  componentDidMount = () => {\n    // We need to call addEventListener ourselves so that we can pass\n    // {passive: false}\n    this.td.addEventListener(\"touchstart\", this.handleTouchStart, {\n      passive: false\n    });\n    this.td.addEventListener(\"touchmove\", this.handleTouchMove, {\n      passive: false\n    });\n  };\n\n  componentWillUnmount = () => {\n    this.td.removeEventListener(\"touchstart\", this.handleTouchStart);\n    this.td.removeEventListener(\"touchmove\", this.handleTouchMove);\n  };\n\n  render = () => {\n    let {\n      className,\n      disabled,\n      beingSelected,\n      selected,\n      onTouchStart,\n      onTouchMove,\n      ...props\n    } = this.props;\n    if (disabled) {\n      className += \" cell-disabled\";\n    } else {\n      className += \" cell-enabled\";\n      if (selected) {\n        className += \" cell-selected\";\n      }\n      if (beingSelected) {\n        className += \" cell-being-selected\";\n      }\n    }\n    return (\n      <td\n        ref={td => (this.td = td)}\n        className={className}\n        onMouseDown={this.handleTouchStart}\n        onMouseMove={this.handleTouchMove}\n        {...props}\n      >\n        {this.props.children || <span>&nbsp;</span>}\n      </td>\n    );\n  };\n\n  handleTouchStart = e => {\n    if (!this.props.disabled) {\n      this.props.onTouchStart(e);\n    }\n  };\n\n  handleTouchMove = e => {\n    if (!this.props.disabled) {\n      this.props.onTouchMove(e);\n    }\n  };\n}\n\n// Takes a mouse or touch event and returns the corresponding row and cell.\n// Example:\n//\n// eventToCellLocation(event);\n// {row: 2, column: 3}\nconst eventToCellLocation = e => {\n  let target;\n  // For touchmove and touchend events, e.target and e.touches[n].target are\n  // wrong, so we have to rely on elementFromPoint(). For mouse clicks, we have\n  // to use e.target.\n  if (e.touches) {\n    const touch = e.touches[0];\n    target = document.elementFromPoint(touch.clientX, touch.clientY);\n  } else {\n    target = e.target;\n    while (target.tagName !== \"TD\") {\n      target = target.parentNode;\n    }\n  }\n  return {\n    row: target.parentNode.rowIndex,\n    column: target.cellIndex\n  };\n};"]}